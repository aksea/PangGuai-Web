<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PangGuai 控制台 · 登录</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <script src="https://unpkg.com/axios@1.6.2/dist/axios.min.js"></script>
  <script src="crypto_logic.js"></script>
</head>
<body class="page-auth" data-page="auth">
  <div class="bg-grid"></div>
  <div class="auth-shell">
    <div class="auth-card">
      <div class="brand">
        <div class="logo-circle">PG</div>
        <div>
          <h1>PangGuai Cloud</h1>
          <p>自动化积分托管助手</p>
        </div>
      </div>

      <form id="sms-login-form" class="auth-form">
        <div id="step-1">
          <div class="field">
            <label for="phoneInput">手机号</label>
            <input id="phoneInput" name="phone" maxlength="11" placeholder="请输入11位手机号" required>
          </div>
          <button id="checkPhoneBtn" type="button" class="btn primary full-width">下一步</button>
          <div class="auth-links">
            <span class="link-btn link-login active" data-mode="login">登录</span>
            <span class="divider-dot">·</span>
            <span class="link-btn link-register" data-mode="register">注册</span>
          </div>
        </div>

        <div id="step-2" class="hidden">
          <div class="field">
            <label>手机号</label>
            <input id="phoneDisplay" style="background:#f8fafc;">
          </div>

          <div class="field">
            <label for="verifyInput">验证码</label>
            <div class="verify-row">
              <input id="verifyInput" name="verify" placeholder="6位数字" maxlength="6">
              <button id="sendCodeBtn" type="button" class="btn ghost">获取验证码</button>
            </div>
          </div>

          <button id="loginBtn" type="submit" class="btn primary full-width">获取 Token 并托管</button>
          <div class="auth-links">
            <span class="link-btn link-login active" data-mode="login">登录</span>
            <span class="divider-dot">·</span>
            <span class="link-btn link-register" data-mode="register">注册</span>
          </div>
        </div>

        <p class="helper">
          云端托管系统 · Token 有效期 30 天<br>
          无需保持网页开启
        </p>
      </form>

      <div style="display: none;">
        <div id="responseDisplay"></div>
        <div id="uploadStatus"></div>
      </div>
      <div id="auth-message" class="message"></div>
    </div>
  </div>
  <script src="app.js"></script>
</body>
</html>
